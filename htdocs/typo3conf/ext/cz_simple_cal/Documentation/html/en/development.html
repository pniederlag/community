<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Technical documentation for calendar extension "cz_simple_cal" for developers</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="cz_simple_cal is a simple calendar written on top of extbase. This documentation aims to help developers who'd like to understand and extend this extension."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" title='Technical documentation for calendar extension "cz_simple_cal" for developers'><div class="titlepage"><div><div><h1 class="title"><a name="id3916009"></a>Technical documentation for calendar extension "cz_simple_cal" for developers</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Christian</span> <span class="surname">Zenker</span></h3><code class="email">&lt;<a class="email" href="mailto:christian.zenker@599media.de">christian.zenker@599media.de</a>&gt;</code></div></div><div><p class="copyright">Copyright © 2010 Christian Zenker</p></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>cz_simple_cal is a simple calendar written on top of extbase.</p><p>This documentation aims to help developers who'd like to understand and extend this extension.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#chapter.concepts">1. Concepts</a></span></dt><dd><dl><dt><span class="section"><a href="#chapter.concepts.eventindex">Event Index</a></span></dt><dt><span class="section"><a href="#chapter.concepts.fake-actions">Fake Actions</a></span></dt><dt><span class="section"><a href="#chapter.concepts.date-type">The type <code class="literal">date</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#development.testing">2. Testing</a></span></dt><dd><dl><dt><span class="section"><a href="#development.testing.unit">Setting up Unit Tests</a></span></dt><dt><span class="section"><a href="#development.testing.selenium">Setting up Selenium Tests</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapter.copyrights">3. Copyright Notice</a></span></dt><dt><span class="glossary"><a href="#id3917010">Glossary</a></span></dt><dt><span class="appendix"><a href="#appendix.date">A. The type <code class="literal">date</code></a></span></dt><dd><dl><dt><span class="section"><a href="#datetime.formats.date">Date Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.time">Time Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.compound">Compound Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.relative">Relative Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.chaining">Chaining</a></span></dt></dl></dd></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>A.1. <a href="#id3917449">Used Symbols</a></dt><dt>A.2. <a href="#id3917653">Localized Notations</a></dt><dt>A.3. <a href="#id3918068">ISO8601 Notations</a></dt><dt>A.4. <a href="#id3918337">Used Symbols</a></dt><dt>A.5. <a href="#id3918530">12 Hour Notation</a></dt><dt>A.6. <a href="#id3918677">24 Hour Notation</a></dt><dt>A.7. <a href="#id3918909">Used Symbols</a></dt><dt>A.8. <a href="#id3919214">Localized Notations</a></dt><dt>A.9. <a href="#id3919577">Used Symbols</a></dt><dt>A.10. <a href="#id3919653">Day-based Notations</a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>1.1. <a href="#id3916581">Examples of valid dates and times</a></dt><dt>1.2. <a href="#id3916614">Examples of valid relative dates</a></dt><dt>A.1. <a href="#id3919818">Chaining of DateTime formats</a></dt></dl></div><div class="chapter" title="Chapter 1. Concepts"><div class="titlepage"><div><div><h2 class="title"><a name="chapter.concepts"></a>Chapter 1. Concepts</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#chapter.concepts.eventindex">Event Index</a></span></dt><dt><span class="section"><a href="#chapter.concepts.fake-actions">Fake Actions</a></span></dt><dt><span class="section"><a href="#chapter.concepts.date-type">The type <code class="literal">date</code></a></span></dt></dl></div><p>This section tries to explain some of the basic concepts of the calendar.</p><div class="section" title="Event Index"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="chapter.concepts.eventindex"></a>Event Index</h2></div></div></div><p>
			<span class="productname">Calendar Base</span> introduced something called <span class="emphasis"><em>New Recurring Event Model</em></span>.
			This concept was borrowed and applied to all of <span class="productname">cz_simple_cal</span> events by default. The index is automatically updated if you modify
			an event. So depending on how many recurrances and exceptions you've set up, storing might take a while longer.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
			The extension is smart enough to notify if you changed some values that actually require indexing to run again.
			So if you only change the title or a description, no indexing is done.
		</div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can use the <span class="productname">scheduler</span> extension to re-index all your events. This 
			should be done if you updated Exceptions that are applied to multiple Events, moved records around or if you 
			changed the <code class="code">recurrenceEnd</code> setting. The <span class="productname">scheduler</span> is a core extension
			and shipped with <span class="productname">TYPO3</span>, but you might have to install it in the extension manager.
			</p></div><p>
			Due to the indexing of events you usually deal with <a class="link" href="#glossary.eventindex">EventIndices</a> in your
			templates. But the objects are smart enough to tunnel unknown methods to the <a class="link" href="#glossary.eventindex">Event</a>
			they belong to. So you can work with <code class="literal">EventIndices</code> as if they were Events.   
		</p></div><div class="section" title="Fake Actions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="chapter.concepts.fake-actions"></a>Fake Actions</h2></div></div></div><p>
			To make the extension as flexible as possible you can add <a class="link" href="#">fake actions</a>
			to the controllers in your TypoScript.
		</p><p>
			Fake Actions are actions you can add to a Controller solely through TypoScript.
		</p><p>See <a class="link" href="#">HowTo: Add a fake action</a> to learn - guess what - how to add a fake action.</p></div><div class="section" title="The type date"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="chapter.concepts.date-type"></a>The type <code class="literal">date</code></h2></div></div></div><p>
			This type is quite heavily used in the extension. It allowes for a very flexible and simple calculation of dates
			and times. It is based on the english language and international date and time formats.
		</p><p>
			The recommended way of setting a fixed day and time is the <code class="literal">YYYY-MM-DD (HH:MM:SS[T]?)?</code> syntax, but
			there are also different valid syntaxes:
		</p><div class="example"><a name="id3916581"></a><p class="title"><b>Example 1.1. Examples of valid dates and times</b></p><div class="example-contents"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><strong class="userinput"><code>2009-02-13</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>2009-02-13 23:31:30</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>2009-02-13 23:31:30UTC</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>13.2.09 23.31.30+00:00</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>February 13th, 2009 11 pm</code></strong></p></li></ul></div></div></div><br class="example-break"><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that you can't use localized month names here.</p></div><p>Additionally you can use relative dates and chaining of different relative dates.</p><div class="example"><a name="id3916614"></a><p class="title"><b>Example 1.2. Examples of valid relative dates</b></p><div class="example-contents"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><strong class="userinput"><code>yesterday</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>last monday</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>+1 month -1 day</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>first day this month|monday this week</code></strong></p></li></ul></div></div></div><br class="example-break"><p>See <a class="link" href="#appendix.date" title="Appendix A. The type date">the appendix for the complete syntax.</a></p></div></div><div class="chapter" title="Chapter 2. Testing"><div class="titlepage"><div><div><h2 class="title"><a name="development.testing"></a>Chapter 2. Testing</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#development.testing.unit">Setting up Unit Tests</a></span></dt><dt><span class="section"><a href="#development.testing.selenium">Setting up Selenium Tests</a></span></dt></dl></div><p>This section will explain how to set up a testing environment for the extension.</p><div class="section" title="Setting up Unit Tests"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="development.testing.unit"></a>Setting up Unit Tests</h2></div></div></div><p>
				You need to install the extension <span class="productname">phpunit</span> in order to run Unit Tests. You can 
				find the extension <a class="link" href="http://typo3.org/extensions/repository/view/phpunit/current/" target="_top"><span class="productname">phpunit</span> on TER</a>. 
			</p><p>
				There is not much to say on the installation of the extension. It is straight forward and as it comes bundled with
				a PHPUnit library, so you won't even need to install a PEAR package. If you should encounter any difficulties, consult
				the <a class="link" href="http://typo3.org/documentation/document-library/extension-manuals/phpunit/3.4.12/view/" target="_top">documentation on the internet</a> or your local machine. 
			</p><p>
				After successful installation you should see the PHPUnit module in the Admin Section. Click it and select 
				<span class="productname">cz_simple_cal</span> as extension to run the unit tests. 
				Make sure that all the options <code class="literal">Success</code>,  <code class="literal">Failure</code>, <code class="literal">Skipped</code> and <code class="literal">Error</code>
				are checked. Otherwise you might miss a faulty behaviour.
				Click <code class="computeroutput">Run all tests</code> and all the tests should be run. If the bar is not green
				after running all tests or the word "Success" is not displayed at the bottom of the list, something went wrong.  
			</p></div><div class="section" title="Setting up Selenium Tests"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="development.testing.selenium"></a>Setting up Selenium Tests</h2></div></div></div><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>
					You should use a seperate TYPO3 installation and database for running selenium tests as you need to create some pages
					for testing.
				</p></div><div class="procedure" title="Procedure 2.1. Setting up Selenium Tests"><a name="id3916744"></a><p class="title"><b>Procedure 2.1. Setting up Selenium Tests</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>
						You should have the extension <span class="productname">phpunit</span> installed as described in the last section.
						Additionally you need the extension <span class="productname">selenium</span>. You can ignore the installed module
						in the Admin Tools as even the selenium tests are run inside PHPUnit.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
							If the <span class="productname">selenium</span> extension is not enabled, all Selenium Tests will be skipped automatically.
						</p></div></li><li class="step" title="Step 2"><p>
						Now install <span class="productname">Selenium Remote Control (RC)</span> - if you don't have it running already.<br>
						Download it at <a class="link" href="http://seleniumhq.org/download/" target="_top">selenium.org</a> and unpack. All you need is 
						the <code class="filename">selenium-remote-control-1.x.x/selenium-server-1.x.x</code> folder - you might as well delete
						all the others.<br>
						Run the <code class="filename">selenium-server.jar</code> using <span class="productname">JAVA</span>, for example by typing
						<strong class="userinput"><code>java -jar selenium-server.jar</code></strong> on your console.
					</p></li><li class="step" title="Step 3"><p>Import the data using the t3d-Importer.</p><ol type="a" class="substeps"><li class="step" title="Step 3.a"><p>
								Therefore enter the backend and click the <span class="productname">TYPO3</span>-Icon in the pagetree.
								The context menu holds the option <code class="literal">Import from .t3d</code>.
							</p></li><li class="step" title="Step 3.b"><p>
								In the tab labeled <code class="literal">Import</code> select the option <code class="literal">Force ALL UIDs values</code>.
							</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
									If you decide to <span class="emphasis"><em>not</em></span> set this option, all you have to do is set the TypoScript 
									constants in the root template with the pid of your <code class="literal">data</code> folder.
								</p><p>
									But if you force all uids, updating the test data for newer versions of this extension might
									turn out a little easier.
								</p></div></li><li class="step" title="Step 3.c"><p>
								Select the file <code class="filename">EXT:cz_simple_cal/Resources/Private/Tests/selenium-data.t3d</code>
								in the <code class="literal">Upload</code> tab.
							</p></li><li class="step" title="Step 3.d"><p>
								Hit the <code class="literal">upload files button</code>.
							</p></li><li class="step" title="Step 3.e"><p>
								Jump back to the <code class="literal">Import</code> tab and hit the <code class="literal">Import</code> button.
							</p></li></ol></li><li class="step" title="Step 4"><p>
						Delete the event labeled <code class="literal">Deleted event</code> on the <code class="literal">data</code> page.
					</p></li><li class="step" title="Step 5"><p>
						Use the <span class="productname">scheduler</span> to create a <code class="literal">Index all events (cz_simple_cal)</code>-task and run it to
						create all the recurring events.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The extension <span class="productname">scheduler</span> is shipped with the <span class="productname">TYPO3</span> core but disabled by default.</p></div></li><li class="step" title="Step 6"><p>
						Run the test by selecting the <code class="literal">PHPUnit</code> module in the backend, select <code class="literal">cz_simple_cal</code>
						as extension and <code class="literal">Tx_CzSimpleCalTests_Selenium_Tests</code> as test case and hit
						<code class="literal">Run test case file</code>.
					</p></li></ol></div></div></div><div class="chapter" title="Chapter 3. Copyright Notice"><div class="titlepage"><div><div><h2 class="title"><a name="chapter.copyrights"></a>Chapter 3. Copyright Notice</h2></div></div></div><p>This project uses some of the <a class="link" href="http://p.yusukekamiyamane.com/" target="_top">Fugue Icons</a>. They are published under a <a class="link" href="http://creativecommons.org/licenses/by/3.0" target="_top"><span class="productname">Creative Commons</span></a> license:</p><p><code class="literal">Copyright (C) 2010 Yusuke Kamiyamane. All rights reserved.
The icons are licensed under a Creative Commons Attribution
3.0 license.</code></p><p>The <a class="link" href="#appendix.date" title="Appendix A. The type date">documentation on the date type in the appendix</a> is a slight modification of the official
		<span class="productname">PHP</span> documentation which is licensed under a <a class="link" href="http://creativecommons.org/licenses/by/3.0" target="_top">Creative Commons</a> license.
	</p><p><code class="literal">Copyright © 1997 - 2010 by the PHP Documentation Group.
This material may be distributed only subject to the terms and
conditions set forth in the Creative Commons Attribution 3.0 License
or later.</code></p></div><div class="glossary" title="Glossary"><div class="titlepage"><div><div><h2 class="title"><a name="id3917010"></a>Glossary</h2></div></div></div><dl><dt>Date</dt><dd><p>
			A date usually means the combination of <a class="link" href="#glossary.day">day</a> and <a class="link" href="#glossary.time">time</a>.</p><p>See Also <a class="glossseealso" href="#glossary.day">Day</a>, <a class="glossseealso" href="#glossary.time">Time</a>.</p></dd><dt>Day</dt><dd><p>
			When speaking of a <span class="emphasis"><em>day</em></span> usually no time is meant. For example 1st January 2010 would be a day.</p><p>See Also <a class="glossseealso" href="#glossary.date">Date</a>, <a class="glossseealso" href="#glossary.time">Time</a>.</p></dd><dt>Time</dt><dd><p>
			When speaking of a <span class="emphasis"><em>time</em></span> usually no day is meant. For example 12:34:56 would be a time.</p><p>See Also <a class="glossseealso" href="#glossary.date">Date</a>, <a class="glossseealso" href="#glossary.day">Day</a>.</p></dd><dt>Event (Domain Object)</dt><dd><p>
			The Domain Object <code class="literal">Event</code> represents a series of events that share some common information
			like the name or a description. Events might be recurrant or have exceptions in this recurrances.</p><p>See Also <a class="glossseealso" href="#glossary.eventindex">EventIndex (Domain Object)</a>.</p></dd><dt>Event (Controller)</dt><dd><p>
			The most important controller for the Events. Technically it is no controller for the <a class="link" href="#glossary.event-domain-model"><code class="literal">Event</code></a>
			but for the <a class="link" href="#glossary.eventindex"><code class="literal">EventIndex</code></a>
			</p></dd><dt>EventIndex (Domain Object)</dt><dd><p>
			In contrast to the <a class="link" href="#">Event</a> an <code class="literal">EventIndex</code> 
			is a representation of a concrete occurance of the event. So an <code class="literal">Event</code> the recurrs every week will have a 
			<code class="literal">EventIndex</code> representation fore every week.
			Even not recurring Events have an <code class="literal">EventIndex</code> representation. Queries on several events are
			almost exclusivly done on these domain objects.
			</p><p>See Also Event.</p></dd><dt>Exception (Domain Object)</dt><dd><p>
			An <code class="literal">Exception</code> is an "<code class="literal">Event</code>" that symbolizes that an Event is not taking place when 
			the exception is active. It might be recurring, but Exceptions is not stored are not stored as Indices in the database
			as it is done with Events.
			</p></dd><dt>ExceptionGroup (Domain Object)</dt><dd><p>
			A collection of <code class="literal">Exceptions</code> that belong together somehow.
			</p></dd><dt>GetDate</dt><dd><p>
			GetDate is a concept taken from the TYPO3 extension <span class="productname">cal</span>. GetDate makes some actions configurable
			using GET-parameters. All relative dates of the action are calculated based on that date. 
			</p></dd><dt>Timespan</dt><dd><p>
			A timespan has a start and an end date and covers everything in between. There are no gaps in a timespan.
			</p></dd><dt>Timeline</dt><dd><p>
			A timeline is a collection of timespans. The contained timespans might overlap or build gaps.
			</p><p>See Also <a class="glossseealso" href="#glossary.timespan">Timespan</a>.</p></dd><dt>Fake Action</dt><dd><p>
			One of the concepts of this calendar is to generate actions dynamically based on TypoScript configuration. Actions that
			have no method in the corresponding controller are called "fake actions".
			</p><p>See Also <a class="glossseealso" href="#glossary.real-action">Real Action</a>.</p></dd><dt>Real Action</dt><dd><p>
			In comparisson to fake actions the real actions have a method in the corresponding controller. These are the actions
			as they are conceptually intended by extbase.
			</p><p>See Also <a class="glossseealso" href="#glossary.fake-action">Fake Action</a>.</p></dd></dl></div><div class="appendix" title="Appendix A. The type date"><div class="titlepage"><div><div><h2 class="title"><a name="appendix.date"></a>Appendix A. The type <code class="literal">date</code></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#datetime.formats.date">Date Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.time">Time Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.compound">Compound Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.relative">Relative Formats</a></span></dt><dt><span class="section"><a href="#datetime.formats.chaining">Chaining</a></span></dt></dl></div><p>
		The first thing to mention is that you can <span class="emphasis"><em>only</em></span> use english phrases and month names. Numeric formats are usually standartized formats.<br>
	</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
			The type <code class="literal">date</code> is based on <span class="productname">PHP</span>'s <a class="link" href="http://php.net/manual/en/datetime.formats.php" target="_top">date and time formats</a>.
			With some exceptions all of the formats there can be used. Some of the relative formats require <span class="productname">PHP 5.3</span>, so you should avoid them if possible
			to keep compatibility.
		</p></div><div class="section" title="Date Formats"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="datetime.formats.date"></a>Date Formats</h2></div></div></div><div class="table"><a name="id3917449"></a><p class="title"><b>Table A.1. Used Symbols</b></p><div class="table-contents"><table summary="Used Symbols" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Format</th><th>Examples</th></tr></thead><tbody><tr><td><code class="literal">daysuf</code></td><td>"st" | "nd" | "rd" | "th"</td><td> </td></tr><tr><td><code class="literal">dd</code></td><td>([0-2]?[0-9] | "3"[01]) <code class="literal">daysuf</code>?</td><td>"7th", "22nd", "31"</td></tr><tr><td><code class="literal">DD</code></td><td>"0" [0-9] | [1-2][0-9] | "3" [01]</td><td>"07", "31"</td></tr><tr><td><code class="literal">m</code></td><td>'january' | 'february' | 'march' | 'april' | 'may' | 'june' |
      'july' | 'august' | 'september' | 'october' | 'november' | 'december' |
      'jan' | 'feb' | 'mar' | 'apr' | 'may' | 'jun' | 'jul' | 'aug' | 'sep' |
      'sept' | 'oct' | 'nov' | 'dec' | "I" | "II" | "III" | "IV" | "V" | "VI"
      | "VII" | "VIII" | "IX" | "X" | "XI" | "XII"</td><td> </td></tr><tr><td><code class="literal">M</code></td><td>'jan' | 'feb' | 'mar' | 'apr' | 'may' | 'jun' | 'jul' | 'aug' |
      'sep' | 'sept' | 'oct' | 'nov' | 'dec'</td><td> </td></tr><tr><td><code class="literal">mm</code></td><td>"0"? [0-9] | "1"[0-2]</td><td>"0", "04", "7", "12"</td></tr><tr><td><code class="literal">MM</code></td><td>"0" [0-9] | "1"[0-2]</td><td>"00", "04", "07", "12"</td></tr><tr><td><code class="literal">y</code></td><td>[0-9]{1,4}</td><td>"00", "78", "08", "8", "2008"</td></tr><tr><td><code class="literal">yy</code></td><td>[0-9]{2}</td><td>"00", "08", "78"</td></tr><tr><td><code class="literal">YY</code></td><td>[0-9]{4}</td><td>"2000", "2008", "1978"</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id3917653"></a><p class="title"><b>Table A.2. Localized Notations</b></p><div class="table-contents"><table summary="Localized Notations" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Format</th><th>Examples</th></tr></thead><tbody><tr><td>American month and day</td><td><code class="literal">mm</code> "/" <code class="literal">dd</code></td><td>"5/12", "10/27"</td></tr><tr><td>American month, day and year</td><td><code class="literal">mm</code> "/" <code class="literal">dd</code> "/" <code class="literal">y</code></td><td>"12/22/78", "1/17/2006", "1/17/6"</td></tr><tr><td>Four digit year, month and day with slashes</td><td><code class="literal">YY</code> "/" <code class="literal">mm</code> "/" <code class="literal">dd</code></td><td>"2008/6/30", "1978/12/22"</td></tr><tr><td>Four digit year and month (GNU)</td><td><code class="literal">YY</code> "-" <code class="literal">mm</code></td><td>"2008-6", "2008-06", "1978-12"</td></tr><tr><td>Year, month and day with dashes</td><td><code class="literal">y</code> "-" <code class="literal">mm</code> "-" <code class="literal">dd</code></td><td>"2008-6-30", "78-12-22", "8-6-21"</td></tr><tr><td>Day, month and four digit year, with dots, tabs or dashes</td><td><code class="literal">dd</code> [.\t-] <code class="literal">mm</code> [.-] <code class="literal">YY</code></td><td>"30-6-2008", "22.12\t1978"</td></tr><tr><td>Day, month and two digit year, with dots or tabs</td><td><code class="literal">dd</code> [.\t] <code class="literal">mm</code> "." <code class="literal">yy</code></td><td>"30.6.08", "22\t12\t78"</td></tr><tr><td>Day, textual month and year</td><td><code class="literal">dd</code> ([ \t.-])* <code class="literal">m</code> ([ \t.-])* <code class="literal">y</code></td><td>"30-June 2008", "22DEC78", "14 III 1879"</td></tr><tr><td>Textual month and four digit year (Day reset to 1)</td><td><code class="literal">m</code> ([ \t.-])* <code class="literal">YY</code></td><td>"June 2008", "DEC1978", "March 1879"</td></tr><tr><td>Four digit year and textual month (Day reset to 1)</td><td><code class="literal">YY</code> ([ \t.-])* <code class="literal">m</code></td><td>"2008 June", "1978-XII", "1879.MArCH"</td></tr><tr><td>Textual month, day and year</td><td><code class="literal">m</code> ([ .\t-])* <code class="literal">dd</code> [,.stndrh\t ]+ <code class="literal">y</code></td><td>"July 1st, 2008", "April 17, 1790", "May.9,78"</td></tr><tr><td>Textual month and day</td><td><code class="literal">m</code> ([ .\t-])* <code class="literal">dd</code> [,.stndrh\t ]*</td><td>"July 1st,", "Apr 17", "May.9"</td></tr><tr><td>Day and textual month</td><td><code class="literal">d</code> ([ .\t-])* <code class="literal">m</code></td><td>"1 July", "17 Apr", "9.May"</td></tr><tr><td>Month abbreviation, day and year</td><td><code class="literal">M</code> "-" <code class="literal">DD</code> "-" <code class="literal">y</code></td><td>"May-09-78", "Apr-17-1790"</td></tr><tr><td>Year, month abbreviation and day</td><td><code class="literal">y</code> "-" <code class="literal">M</code> "-" <code class="literal">DD</code></td><td>"78-Dec-22", "1814-MAY-17"</td></tr><tr><td>Year (and just the year)</td><td><code class="literal">YY</code></td><td>"1978", "2008"</td></tr><tr><td>Textual month (and just the month)</td><td><code class="literal">m</code></td><td>"March", "jun", "DEC"</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id3918068"></a><p class="title"><b>Table A.3. ISO8601 Notations</b></p><div class="table-contents"><table summary="ISO8601 Notations" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Format</th><th>Examples</th></tr></thead><tbody><tr><td>Eight digit year, month and day</td><td><code class="literal">YY</code> <code class="literal">MM</code> <code class="literal">DD</code></td><td>"15810726", "19780417", "18140517"</td></tr><tr><td>Four digit year, month and day with slashes</td><td><code class="literal">YY</code> "/" <code class="literal">MM</code> "/" <code class="literal">DD</code></td><td>"2008/06/30", "1978/12/22"</td></tr><tr><td>Two digit year, month and day with dashes</td><td><code class="literal">yy</code> "-" <code class="literal">MM</code> "-" <code class="literal">DD</code></td><td>"08-06-30", "78-12-22"</td></tr><tr><td>Four digit year with optional sign, month and day</td><td>[+-]? <code class="literal">YY</code> "-" <code class="literal">MM</code> "-" <code class="literal">DD</code></td><td>"-0002-07-26", "+1978-04-17", "1814-05-17"</td></tr></tbody></table></div></div><br class="table-break"><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
    For the <code class="literal">y</code> and <code class="literal">yy</code>
    formats, years below 100 are handled in a special way when the
    <code class="literal">y</code> or <code class="literal">yy</code> symbol is used.
    If the year falls in the range 0 (inclusive) to 69 (inclusive),
    2000 is added. If the year falls in the range 70 (inclusive) to
    99 (inclusive) then 1900 is added. This means that "00-01-01" is
    interpreted as "2000-01-01".
   </p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
    The "Day, month and two digit year, with dots or tabs" format
    (<code class="literal">dd</code> [.\t] <code class="literal">mm</code> "."
    <code class="literal">yy</code>) only works for the year values 61 (inclusive)
    to 99 (inclusive) - outside those years the <span class="emphasis"><em>time
    format</em></span> "<code class="literal">HH</code> [.:] <code class="literal">MM</code>
    [.:] <code class="literal">SS</code>" has precedence.
   </p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
    The "Year (and just the year)" format only works if a time string
    has already been found -- otherwise this format is recognised as
    <code class="literal">HH</code> <code class="literal">MM</code>.
   </p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
    It is possible to over- and underflow the <code class="literal">dd</code> and
    <code class="literal">DD</code> format. Day 0 means the last day of previous
    month, whereas overflows count into the next month. This makes
    "2008-08-00" equivalent to "2008-07-31" and "2008-06-31" equivalent
    to "2008-07-01" (June only has 30 days).
   </p><p>
    It is also possible to underflow the <code class="literal">mm</code> and
    <code class="literal">MM</code> formats with the value 0. A month value of
    0 means December of the previous year. As example "2008-00-22" is
    equivalent to "2007-12-22".
   </p><p>
    If you combine the previous two facts and underflow both the day and
    the month, the following happens: "2008-00-00" first gets converted
    to "2007-12-00" which then gets converted to "2007-11-30". This also
    happens with the string "0000-00-00", which gets transformed into
    "-0001-11-30" (the year -1 in the ISO 8601 calendar, which is 2 BC
    in the proleptic Gregorian calendar).
   </p></div></div><div class="section" title="Time Formats"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="datetime.formats.time"></a>Time Formats</h2></div></div></div><div class="table"><a name="id3918337"></a><p class="title"><b>Table A.4. Used Symbols</b></p><div class="table-contents"><table summary="Used Symbols" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Formats</th><th>Examples</th></tr></thead><tbody><tr><td><code class="literal">frac</code></td><td>. [0-9]+</td><td>".21342", ".85"</td></tr><tr><td><code class="literal">hh</code></td><td>"0"?[1-9] | "1"[0-2]</td><td>"04", "7", "12"</td></tr><tr><td><code class="literal">HH</code></td><td>[01][0-9] | "2"[0-4]</td><td>"04", "7", "19"</td></tr><tr><td><code class="literal">meridian</code></td><td>[AaPp] .? [Mm] .? [\0\t ]</td><td>"A.m.", "pM", "am."</td></tr><tr><td><code class="literal">MM</code></td><td>[0-5][0-9]</td><td>"00", "12", "59"</td></tr><tr><td><code class="literal">II</code></td><td>[0-5][0-9]</td><td>"00", "12", "59"</td></tr><tr><td><code class="literal">space</code></td><td>[ \t]</td><td> </td></tr><tr><td><code class="literal">tz</code></td><td>"("? [A-Za-z]{1,6} ")"? | [A-Z][a-z]+([_/][A-Z][a-z]+)+</td><td>"CEST", "Europe/Amsterdam", "America/Indiana/Knox"</td></tr><tr><td><code class="literal">tzcorrection</code></td><td>"GMT"? [+-] <code class="literal">hh</code> ":"? <code class="literal">MM</code>?</td><td>"+0400", "GMT-07:00", "-07:00"</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id3918530"></a><p class="title"><b>Table A.5. 12 Hour Notation</b></p><div class="table-contents"><table summary="12 Hour Notation" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Format</th><th>Examples</th></tr></thead><tbody><tr><td>Hour only, with meridian</td><td><code class="literal">hh</code> <code class="literal">space</code>? <code class="literal">meridian</code></td><td>"4 am", "5PM"</td></tr><tr><td>Hour and minutes, with meridian</td><td><code class="literal">hh</code> [.:] <code class="literal">MM</code> <code class="literal">space</code>? <code class="literal">meridian</code></td><td>"4:08 am", "7:19P.M."</td></tr><tr><td>Hour, minutes and seconds, with meridian</td><td><code class="literal">hh</code> [.:] <code class="literal">MM</code> [.:] <code class="literal">II</code> <code class="literal">space</code>? <code class="literal">meridian</code></td><td>"4:08:37 am", "7:19:19P.M."</td></tr><tr><td>MS SQL (Hour, minutes, seconds and fraction with meridian), PHP 5.3 and later only</td><td><code class="literal">hh</code> ":" <code class="literal">MM</code> ":" <code class="literal">II</code> [.:] [0-9]+ <code class="literal">meridian</code></td><td>"4:08:39:12313am"</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id3918677"></a><p class="title"><b>Table A.6. 24 Hour Notation</b></p><div class="table-contents"><table summary="24 Hour Notation" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Format</th><th>Examples</th></tr></thead><tbody><tr><td>Hour and minutes</td><td>'t'? <code class="literal">HH</code> [.:] <code class="literal">MM</code></td><td>"04:08", "19.19", "T23:43"</td></tr><tr><td>Hour and minutes, no colon</td><td>'t'? <code class="literal">HH</code> <code class="literal">MM</code></td><td>"0408", "t1919", "T2343"</td></tr><tr><td>Hour, minutes and seconds</td><td>'t'? <code class="literal">HH</code> [.:] <code class="literal">MM</code> [.:] <code class="literal">II</code></td><td>"04.08.37", "t19:19:19"</td></tr><tr><td>Hour, minutes and seconds, no colon</td><td>'t'? <code class="literal">HH</code> <code class="literal">MM</code> <code class="literal">II</code></td><td>"040837", "T191919"</td></tr><tr><td>Hour, minutes, seconds and timezone</td><td>'t'? <code class="literal">HH</code> [.:] <code class="literal">MM</code> [.:] <code class="literal">II</code> <code class="literal">space</code>? ( <code class="literal">tzcorrection</code> | <code class="literal">tz</code> )</td><td>"040837CEST", "T191919-0700"</td></tr><tr><td>Hour, minutes, seconds and fraction</td><td>'t'? <code class="literal">HH</code> [.:] <code class="literal">MM</code> [.:] <code class="literal">II</code> <code class="literal">frac</code></td><td>"04.08.37.81412", "19:19:19.532453"</td></tr><tr><td>Time zone information</td><td><code class="literal">tz</code> | <code class="literal">tzcorrection</code></td><td>"CEST", "Europe/Amsterdam", "+0430", "GMT-06:00"</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="Compound Formats"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="datetime.formats.compound"></a>Compound Formats</h2></div></div></div><div class="table"><a name="id3918909"></a><p class="title"><b>Table A.7. Used Symbols</b></p><div class="table-contents"><table summary="Used Symbols" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Formats</th><th>Examples</th></tr></thead><tbody><tr><td><code class="literal">DD</code></td><td>"0" [0-9] | [1-2][0-9] | "3" [01]</td><td>"02", "12", "31"</td></tr><tr><td><code class="literal">doy</code></td><td>"00"[1-9] | "0"[1-9][0-9] | [1-2][0-9][0-9] | "3"[0-5][0-9] | "36"[0-6]</td><td>"36"[0-6] "000", "012", "366"</td></tr><tr><td><code class="literal">frac</code></td><td>. [0-9]+</td><td>".21342", ".85"</td></tr><tr><td><code class="literal">hh</code></td><td>"0"?[1-9] | "1"[0-2]</td><td>"04", "7", "12"</td></tr><tr><td><code class="literal">HH</code></td><td>[01][0-9] | "2"[0-4]</td><td>"04", "7", "19"</td></tr><tr><td><code class="literal">meridian</code></td><td>[AaPp] .? [Mm] .? [\0\t ]</td><td>"A.m.", "pM", "am."</td></tr><tr><td><code class="literal">ii</code></td><td>[0-5][0-9]</td><td>"04", "8", "59"</td></tr><tr><td><code class="literal">II</code></td><td>[0-5][0-9]</td><td>"04", "08", "59"</td></tr><tr><td><code class="literal">M</code></td><td>'jan' | 'feb' | 'mar' | 'apr' | 'may' | 'jun' | 'jul' | 'aug' | 'sep' | 'sept' | 'oct' | 'nov' | 'dec'</td><td> </td></tr><tr><td><code class="literal">MM</code></td><td>[0-5][0-9]</td><td>"00", "12", "59"</td></tr><tr><td><code class="literal">space</code></td><td>[ \t]</td><td> </td></tr><tr><td><code class="literal">ss</code></td><td>[0-5][0-9]</td><td>"04", "8", "59"</td></tr><tr><td><code class="literal">SS</code></td><td>[0-5][0-9]</td><td>"04", "08", "59"</td></tr><tr><td><code class="literal">W</code></td><td>"0"[1-9] | [1-4][0-9] | "5"[0-3]</td><td>"05", "17", "53"</td></tr><tr><td><code class="literal">tzcorrection</code></td><td>"GMT"? [+-] <code class="literal">hh</code> ":"? <code class="literal">MM</code>?</td><td>"+0400", "GMT-07:00", "-07:00"</td></tr><tr><td><code class="literal">YY</code></td><td>[0-9]{4}</td><td>"2000", "2008", "1978"</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id3919214"></a><p class="title"><b>Table A.8. Localized Notations</b></p><div class="table-contents"><table summary="Localized Notations" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Description</th><th>Format</th><th>Examples</th></tr></thead><tbody><tr><td>Common Log Format</td><td><code class="literal">dd</code> "/" <code class="literal">M</code> "/" <code class="literal">YY</code> : <code class="literal">HH</code> ":" <code class="literal">II</code> ":" <code class="literal">SS</code> <code class="literal">space</code> <code class="literal">tzcorrection</code></td><td>"10/Oct/2000:13:55:36 -0700"</td></tr><tr><td>EXIF</td><td><code class="literal">YY</code> ":" <code class="literal">MM</code> ":" <code class="literal">DD</code> " " <code class="literal">HH</code> ":" <code class="literal">II</code> ":" <code class="literal">SS</code></td><td>"2008:08:07 18:11:31"</td></tr><tr><td>ISO year with ISO week</td><td><code class="literal">YY</code> "-"? "W" <code class="literal">W</code></td><td>"2008W27", "2008-W28"</td></tr><tr><td>ISO year with ISO week and day</td><td><code class="literal">YY</code> "-"? "W" <code class="literal">W</code> "-"? [0-7]</td><td>"2008W273", "2008-W28-3"</td></tr><tr><td>PostgreSQL: Year with day-of-year</td><td><code class="literal">YY</code> "."? <code class="literal">doy</code></td><td>"2008.197", "2008197"</td></tr><tr><td>SOAP</td><td><code class="literal">YY</code> "-" <code class="literal">MM</code> "-" <code class="literal">DD</code> "T" <code class="literal">HH</code> ":" <code class="literal">II</code> ":" <code class="literal">SS</code> <code class="literal">frac</code> <code class="literal">tzcorrection</code>?</td><td>"2008-07-01T22:35:17.02", "2008-07-01T22:35:17.03+08:00"</td></tr><tr><td>Unix Timestamp</td><td>"@" "-"? [0-9]+</td><td>"@1215282385"</td></tr><tr><td>XMLRPC</td><td><code class="literal">YY</code> <code class="literal">MM</code> <code class="literal">DD</code> "T" <code class="literal">hh</code> ":" <code class="literal">II</code> ":" <code class="literal">SS</code></td><td>"20080701T22:38:07", "20080701T9:38:07"</td></tr><tr><td>XMLRPC (Compact)</td><td><code class="literal">YY</code> <code class="literal">MM</code> <code class="literal">DD</code> 't' <code class="literal">hh</code> <code class="literal">II</code> <code class="literal">SS</code></td><td>"20080701t223807", "20080701T093807"</td></tr><tr><td>WDDX</td><td><code class="literal">YY</code> "-" <code class="literal">mm</code> "-" <code class="literal">dd</code> "T" <code class="literal">hh</code> ":" <code class="literal">ii</code> ":" <code class="literal">ss</code></td><td>"2008-7-1T9:3:37"</td></tr></tbody></table></div></div><br class="table-break"><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
    The "W" in the "ISO year with ISO week" and "ISO year with ISO week
    day day" formats is case-sensitive, you can only use the upper case
    "W".
   </p><p>
    The "T" in the SOAP, XMRPC and WDDX formats is case-sensitive, you
    can only use the upper case "T".
   </p></div></div><div class="section" title="Relative Formats"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="datetime.formats.relative"></a>Relative Formats</h2></div></div></div><div class="table"><a name="id3919577"></a><p class="title"><b>Table A.9. Used Symbols</b></p><div class="table-contents"><table summary="Used Symbols" border="1"><colgroup><col><col></colgroup><thead><tr><th>Description</th><th>Format</th></tr></thead><tbody><tr><td>
							<code class="literal">dayname</code>
						</td><td>'sunday' | 'monday' | 'tuesday' | 'wednesday' | 'thursday' |
							'friday' | 'saturday' | 'sun' | 'mon' | 'tue' | 'wed' | 'thu' |
							'fri' |
							'sat' | 'sun'</td></tr><tr><td>
							<code class="literal">number</code>
						</td><td>[+-]?[0-9]+</td></tr><tr><td>
							<code class="literal">reltext</code>
						</td><td>'next' | 'last' | 'previous' | 'this'</td></tr><tr><td>
							<code class="literal">space</code>
						</td><td>[ \t]+</td></tr><tr><td>
							<code class="literal">unit</code>
						</td><td>
							(('sec' | 'second' | 'min' | 'minute' | 'hour' | 'day' |
							'month' | 'year') 's'?) | 'weeks' |
							<code class="literal">daytext</code>
						</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id3919653"></a><p class="title"><b>Table A.10. Day-based Notations</b></p><div class="table-contents"><table summary="Day-based Notations" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Format</th><th>Description</th><th>Examples</th></tr></thead><tbody><tr><td>'yesterday'</td><td>Midnight of yesterday</td><td>"yesterday 14:00"</td></tr><tr><td>'midnight'</td><td>The time is set to 00:00:00</td><td> </td></tr><tr><td>'today'</td><td>The time is set to 00:00:00</td><td> </td></tr><tr><td>'now'</td><td>Now - this is simply ignored</td><td> </td></tr><tr><td>'noon'</td><td>The time is set to 12:00:00</td><td>"yesterday noon"</td></tr><tr><td>'tomorrow'</td><td>Midnight of tomorrow</td><td> </td></tr><tr><td>'first day' ' of'?</td><td>Sets the day of the first of the current month. This phrase
							is
							best used together with a month name following it.</td><td>"first day of January 2008"</td></tr><tr><td>'last day' ' of'?</td><td>Sets the day to the last day of the current month. This
							phrase is
							best used together with a month name following it.</td><td>"last day of next month"</td></tr><tr><td>
							'last'
							<code class="literal">space</code>
							<code class="literal">dayname</code>
							<code class="literal">space</code>
							'of'
						</td><td>
							Calculates the
							<span class="emphasis"><em>last</em></span>
							week day of the current month.
						</td><td>"last sat of July 2008"</td></tr><tr><td>
							<code class="literal">number</code>
							<code class="literal">space</code>
							? (
							<code class="literal">unit</code>
							| 'week')
						</td><td>Handles relative time items where the value is a number.</td><td>"+5 weeks", "12 day", "-7 weekdays"</td></tr><tr><td>
							<code class="literal">reltext</code>
							<code class="literal">space</code>
							'week'
						</td><td>Handles the special format "weekday + last/this/next week".</td><td>"Monday next week"</td></tr></tbody></table></div></div><br class="table-break"><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Weeks always start with mondays. That's a difference to the original DateTime starts with sundays.</p></div></div><div class="section" title="Chaining"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="datetime.formats.chaining"></a>Chaining</h2></div></div></div><p>All afore mentioned formats can be chained by using the pipe character (<code class="literal">|</code>). All rules 
		will be applied one after another.</p><div class="example"><a name="id3919818"></a><p class="title"><b>Example A.1. Chaining of DateTime formats</b></p><div class="example-contents"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><strong class="userinput"><code>first day this month|monday this week</code></strong></p></li><li class="listitem"><p><strong class="userinput"><code>2009-02-13 00:00:00|sunday next week</code></strong></p></li></ul></div></div></div><br class="example-break"></div></div></div></body></html>
